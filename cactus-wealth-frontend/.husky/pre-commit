#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged for frontend
cd cactus-wealth-frontend && npm run lint-staged

# Run backend formatting check
cd ../cactus-wealth-backend
if docker-compose ps backend | grep -q "Up"; then
    echo "ğŸ Checking backend code formatting..."
    if ! docker-compose exec -T backend poetry run ruff check --diff .; then
        echo "âŒ Backend code formatting issues detected!"
        echo "ğŸ’¡ Run 'format' command to fix automatically"
        exit 1
    fi
else
    echo "âš ï¸  Backend container not running, skipping backend checks"
fi
